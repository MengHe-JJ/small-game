<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="description" content=" 不超过150个字符"/>
    <meta name="keywords" content=""/>
    <meta name="author" content="name, email@gmail.com"/>
    <meta name="robots" content="index,follow"/>
    <meta name="viewport" content="initial-scale=1, maximum-scale=3, minimum-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-itunes-app" content="app-id=myAppStoreID, affiliate-data=myAffiliateData, app-argument=myURL">
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="format-detection" content="telphone=no, email=no"/>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="MobileOptimized" content="320">
    <!-- uc强制竖屏 -->
    <meta name="screen-orientation" content="portrait">
    <!-- QQ强制竖屏 -->
    <meta name="x5-orientation" content="portrait">
    <!-- UC强制全屏 -->
    <meta name="full-screen" content="yes">
    <!-- QQ强制全屏 -->
    <meta name="x5-fullscreen" content="true">
    <!-- UC应用模式 -->
    <meta name="browsermode" content="application">
    <!-- QQ应用模式 -->
    <meta name="x5-page-mode" content="app">
    <title>爱儿康</title>
    <link href="womanDay.css" rel="stylesheet">
<script>
    (function(){
        var h="orientationchange" in window ? "orientationchange" : "resize";
        var d=function(){
            var w=document.documentElement.clientWidth;
            if(!w){return}
            var size=(w/320)*20;
            document.documentElement.style.fontSize=(size>40?40:size)+"px";
        }
        if(!window.addEventListener){return}
        window.addEventListener(h,d);
        d();
    })()
</script>
<script src="jquery.min.js"></script>
</head>
<body>
    <div class="top">
        <img src="img/banner.png" alt="" />
    </div>
    <div class="warpper">
        <div id="container">
            <ul id="oUl">
                <li class="act lottery-0"><img src="img/icon1.png" alt="" /><p>问诊券</p></li>
                <li class="lottery-1"><img src="img/icon2.png" alt="" /><p>3元现金</p></li>
                <li class="lottery-2"><img src="img/icon3.png" alt="" /><p>10个积分</p></li>

                <li class="lottery-7"><img src="img/icon2.png" alt="" /><p>1元现金</p></li>
                <a href="javascript:LotteryTap()">开始抽奖</a>
                <li class="lottery-3"><img src="img/icon2.png" alt="" /><p>50元现金</p></li>

                <li class="lottery-6"><img src="img/icon5.png" alt="" /><p>代金券</p></li>
                <li class="lottery-5"><img src="img/icon2.png" alt="" /><p>20元现金</p></li>
                <li class="lottery-4"><img src="img/icon4.png" alt="" /><p>充值6折</p></li>
            </ul>
        </div>
    </div>
</body>
<script>
var lottery={
    times:0,//转动的次数；
    timer:null,//setTimer设置；
    index:-1,//转动当前位置
    speed:20,//转动的速度；
    cycle:40,//总基本转动循环；
    prize:-1,//中奖的位置；
    size:0,
    roll:function(){
        var index=this.index;
        var size=$("#oUl li").length;
            this.size=size;
        for(var i=0;i<size;i++){
            $("#oUl li").removeClass('act');
        }
        index++;
        if(index>size-1){index=0}

        $("#oUl").find(".lottery-"+index).addClass('act');
        this.index=index;
        return false;
    }
}
function lotteryRoll(){
    lottery.times++;
    lottery.roll();
    if(lottery.times>lottery.cycle+10&&lottery.prize==lottery.index){
        clearTimeout(lottery.timer);
        alert("恭喜你获得"+lottery.prize+"等奖");
        lottery.prize=-1;
        lottery.times=0
        click=false;
    }else{
        if(lottery.times<lottery.cycle){
            lottery.speed-=10;
        }else if(lottery.times==lottery.cycle){
            var index=Math.random()*lottery.size|0;
            lottery.prize=index;
            console.log(lottery.prize,"prize")
        }else{
            if(lottery.times>lottery.cycle+10&&(lottery.prize==0&&lottery.index==7)||lottery.prize==lottery.index+1){
                lottery.speed+=110;
            }else{
                lottery.speed+=20;
            }
        }
        if(lottery.speed<40){lottery.speed=40}
      lottery.timer=setTimeout(lotteryRoll,lottery.speed);
    }
    return false
}
var click=false;
function LotteryTap(){
    if(click){
        return false;
    }else{
        lottery.speed=100;
        lotteryRoll()
        click=true;
        return false;
    }
}
</script>
</html>